###############################################################################
#                                                                             #
# IAR C/C++ Compiler V8.20.2.41139 for 8051             03/Apr/2014  10:45:42 #
# Copyright 2004-2013 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data                                               #
#    Dptr setup         =  1,16                                               #
#                                                                             #
#    Source file        =  D:\myWork\myWork\core\net\rpl\rpl.c                #
#    Command line       =  D:\myWork\myWork\core\net\rpl\rpl.c -D             #
#                          AUTOSTART_ENABLE -D PROJECT_CONF_H -lC             #
#                          D:\myWork\myWork\examples\wsn2530dk\myProject\coor #
#                          d\List\ -lA D:\myWork\myWork\examples\wsn2530dk\my #
#                          Project\coord\List\ --diag_suppress                #
#                          Pa050,Pa082,Pe550 --diag_warning Pe144 -o          #
#                          D:\myWork\myWork\examples\wsn2530dk\myProject\coor #
#                          d\Obj\ -e --no_cse --no_unroll --no_inline         #
#                          --no_code_motion --no_tbaa --debug --core=plain    #
#                          --dptr=16,1 --data_model=large                     #
#                          --code_model=banked --calling_convention=xdata_ree #
#                          ntrant --place_constants=data --nr_virtual_regs    #
#                          16 --preinclude D:\myWork\myWork\examples\wsn2530d #
#                          k\myProject\..\..\..\cpu\cc253x\cc253x.h -I        #
#                          D:\myWork\myWork\examples\wsn2530dk\myProject\..\. #
#                          .\..\cpu\cc253x\ -I D:\myWork\myWork\examples\wsn2 #
#                          530dk\myProject\..\..\..\platform\wsn2530dk\ -I    #
#                          D:\myWork\myWork\examples\wsn2530dk\myProject\..\. #
#                          .\..\core\ -I D:\myWork\myWork\examples\wsn2530dk\ #
#                          myProject\..\..\..\apps\ -I                        #
#                          D:\myWork\myWork\examples\wsn2530dk\myProject\ -Ol #
#    List file          =  D:\myWork\myWork\examples\wsn2530dk\myProject\coor #
#                          d\List\rpl.lst                                     #
#    Object file        =  D:\myWork\myWork\examples\wsn2530dk\myProject\coor #
#                          d\Obj\rpl.r51                                      #
#                                                                             #
#                                                                             #
###############################################################################

D:\myWork\myWork\core\net\rpl\rpl.c
      1          /**
      2           * \addtogroup uip6
      3           * @{
      4           */
      5          /*
      6           * Copyright (c) 2009, Swedish Institute of Computer Science.
      7           * All rights reserved.
      8           *
      9           * Redistribution and use in source and binary forms, with or without
     10           * modification, are permitted provided that the following conditions
     11           * are met:
     12           * 1. Redistributions of source code must retain the above copyright
     13           *    notice, this list of conditions and the following disclaimer.
     14           * 2. Redistributions in binary form must reproduce the above copyright
     15           *    notice, this list of conditions and the following disclaimer in the
     16           *    documentation and/or other materials provided with the distribution.
     17           * 3. Neither the name of the Institute nor the names of its contributors
     18           *    may be used to endorse or promote products derived from this software
     19           *    without specific prior written permission.
     20           *
     21           * THIS SOFTWARE IS PROVIDED BY THE INSTITUTE AND CONTRIBUTORS ``AS IS'' AND
     22           * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
     23           * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
     24           * ARE DISCLAIMED.  IN NO EVENT SHALL THE INSTITUTE OR CONTRIBUTORS BE LIABLE
     25           * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
     26           * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
     27           * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
     28           * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
     29           * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
     30           * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
     31           * SUCH DAMAGE.
     32           *
     33           * This file is part of the Contiki operating system.
     34           */
     35          /**
     36           * \file
     37           *         ContikiRPL, an implementation of RPL: IPv6 Routing Protocol
     38           *         for Low-Power and Lossy Networks (IETF RFC 6550)
     39           *
     40           * \author Joakim Eriksson <joakime@sics.se>, Nicolas Tsiftes <nvt@sics.se>
     41           */
     42          
     43          #include "net/uip.h"
     44          #include "net/tcpip.h"
     45          #include "net/uip-ds6.h"
     46          #include "net/rpl/rpl-private.h"
     47          
     48          #define DEBUG DEBUG_NONE
     49          #include "net/uip-debug.h"
     50          
     51          #include <limits.h>
     52          #include <string.h>
     53          
     54          #if UIP_CONF_IPV6
     55          
     56          #if RPL_CONF_STATS
     57          rpl_stats_t rpl_stats;
     58          #endif
     59          
     60          /*---------------------------------------------------------------------------*/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
     61          void
     62          rpl_purge_routes(void)
   \                     rpl_purge_routes:
     63          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 16
   \   000005   74F0         MOV     A,#-0x10
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
     64            uip_ds6_route_t *r;
     65            uip_ipaddr_t prefix;
     66            rpl_dag_t *dag;
     67          
     68            /* First pass, decrement lifetime */
     69            r = uip_ds6_route_head();
   \   00000A                ; Setup parameters for call to function uip_ds6_route_head
   \   00000A   12....       LCALL   ??uip_ds6_route_head?relay
   \   00000D   8A..         MOV     ?V0 + 0,R2
   \   00000F   8B..         MOV     ?V0 + 1,R3
   \   000011   AE..         MOV     R6,?V0 + 0
   \   000013   AF..         MOV     R7,?V0 + 1
   \   000015   803F         SJMP    ??rpl_purge_routes_0
     70          
     71            while(r != NULL) {
     72              if(r->state.lifetime >= 1) {
   \                     ??rpl_purge_routes_1:
   \   000017   EE           MOV     A,R6
   \   000018   2414         ADD     A,#0x14
   \   00001A   F582         MOV     DPL,A
   \   00001C   EF           MOV     A,R7
   \   00001D   3400         ADDC    A,#0x0
   \   00001F   F583         MOV     DPH,A
   \   000021   78..         MOV     R0,#?V0 + 0
   \   000023   12....       LCALL   ?L_MOV_X
   \   000026   E5..         MOV     A,?V0 + 0
   \   000028   45..         ORL     A,?V0 + 1
   \   00002A   45..         ORL     A,?V0 + 2
   \   00002C   45..         ORL     A,?V0 + 3
   \   00002E   6017         JZ      ??rpl_purge_routes_2
     73                /*
     74                 * If a route is at lifetime == 1, set it to 0, scheduling it for
     75                 * immediate removal below. This achieves the same as the original code,
     76                 * which would delete lifetime <= 1
     77                 */
     78                r->state.lifetime--;
   \   000030   90....       MOV     DPTR,#__Constant_ffffffff
   \   000033   78..         MOV     R0,#?V0 + 0
   \   000035   12....       LCALL   ?L_MOV_X
   \   000038   EE           MOV     A,R6
   \   000039   2414         ADD     A,#0x14
   \   00003B   F582         MOV     DPL,A
   \   00003D   EF           MOV     A,R7
   \   00003E   3400         ADDC    A,#0x0
   \   000040   F583         MOV     DPH,A
   \   000042   78..         MOV     R0,#?V0 + 0
   \   000044   12....       LCALL   ?L_ADD_TO_X
     79              }
     80              r = uip_ds6_route_next(r);
   \                     ??rpl_purge_routes_2:
   \   000047                ; Setup parameters for call to function uip_ds6_route_next
   \   000047   EE           MOV     A,R6
   \   000048   FA           MOV     R2,A
   \   000049   EF           MOV     A,R7
   \   00004A   FB           MOV     R3,A
   \   00004B   12....       LCALL   ??uip_ds6_route_next?relay
   \   00004E   8A..         MOV     ?V0 + 0,R2
   \   000050   8B..         MOV     ?V0 + 1,R3
   \   000052   AE..         MOV     R6,?V0 + 0
   \   000054   AF..         MOV     R7,?V0 + 1
     81            }
   \                     ??rpl_purge_routes_0:
   \   000056   EE           MOV     A,R6
   \   000057   4F           ORL     A,R7
   \   000058   70BD         JNZ     ??rpl_purge_routes_1
     82          
     83            /* Second pass, remove dead routes */
     84            r = uip_ds6_route_head();
   \   00005A                ; Setup parameters for call to function uip_ds6_route_head
   \   00005A   12....       LCALL   ??uip_ds6_route_head?relay
   \   00005D   8A..         MOV     ?V0 + 0,R2
   \   00005F   8B..         MOV     ?V0 + 1,R3
   \   000061   AE..         MOV     R6,?V0 + 0
   \   000063   AF..         MOV     R7,?V0 + 1
   \   000065   800F         SJMP    ??rpl_purge_routes_3
     85          
     86            while(r != NULL) {
     87              if(r->state.lifetime < 1) {
     88                /* Routes with lifetime == 1 have only just been decremented from 2 to 1,
     89                 * thus we want to keep them. Hence < and not <= */
     90                uip_ipaddr_copy(&prefix, &r->ipaddr);
     91                uip_ds6_route_rm(r);
     92                r = uip_ds6_route_head();
     93                PRINTF("No more routes to ");
     94                PRINT6ADDR(&prefix);
     95                dag = default_instance->current_dag;
     96                /* Propagate this information with a No-Path DAO to preferred parent if we are not a RPL Root */
     97                if(dag->rank != ROOT_RANK(default_instance)) {
     98                  PRINTF(" -> generate No-Path DAO\n");
     99                  dao_output_target(dag->preferred_parent, &prefix, RPL_ZERO_LIFETIME);
    100                  /* Don't schedule more than 1 No-Path DAO, let next iteration handle that */
    101                  return;
    102                }
    103                PRINTF("\n");
    104              } else {
    105                r = uip_ds6_route_next(r);
   \                     ??rpl_purge_routes_4:
   \   000067                ; Setup parameters for call to function uip_ds6_route_next
   \   000067   EE           MOV     A,R6
   \   000068   FA           MOV     R2,A
   \   000069   EF           MOV     A,R7
   \   00006A   FB           MOV     R3,A
   \   00006B   12....       LCALL   ??uip_ds6_route_next?relay
   \   00006E   8A..         MOV     ?V0 + 0,R2
   \   000070   8B..         MOV     ?V0 + 1,R3
   \   000072   AE..         MOV     R6,?V0 + 0
   \   000074   AF..         MOV     R7,?V0 + 1
    106              }
   \                     ??rpl_purge_routes_3:
   \   000076   EE           MOV     A,R6
   \   000077   4F           ORL     A,R7
   \   000078   7003         JNZ     $+5
   \   00007A   02....       LJMP    ??rpl_purge_routes_5 & 0xFFFF
   \   00007D   EE           MOV     A,R6
   \   00007E   2414         ADD     A,#0x14
   \   000080   F582         MOV     DPL,A
   \   000082   EF           MOV     A,R7
   \   000083   3400         ADDC    A,#0x0
   \   000085   F583         MOV     DPH,A
   \   000087   78..         MOV     R0,#?V0 + 0
   \   000089   12....       LCALL   ?L_MOV_X
   \   00008C   E5..         MOV     A,?V0 + 0
   \   00008E   45..         ORL     A,?V0 + 1
   \   000090   45..         ORL     A,?V0 + 2
   \   000092   45..         ORL     A,?V0 + 3
   \   000094   70D1         JNZ     ??rpl_purge_routes_4
   \   000096                ; Setup parameters for call to function memcpy
   \   000096   75..10       MOV     ?V0 + 0,#0x10
   \   000099   75..00       MOV     ?V0 + 1,#0x0
   \   00009C   78..         MOV     R0,#?V0 + 0
   \   00009E   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000A1   EE           MOV     A,R6
   \   0000A2   2404         ADD     A,#0x4
   \   0000A4   FC           MOV     R4,A
   \   0000A5   EF           MOV     A,R7
   \   0000A6   3400         ADDC    A,#0x0
   \   0000A8   FD           MOV     R5,A
   \   0000A9   7402         MOV     A,#0x2
   \   0000AB   12....       LCALL   ?XSTACK_DISP0_8
   \   0000AE   AA82         MOV     R2,DPL
   \   0000B0   AB83         MOV     R3,DPH
   \   0000B2   12....       LCALL   ??memcpy?relay
   \   0000B5   7402         MOV     A,#0x2
   \   0000B7   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000BA                ; Setup parameters for call to function uip_ds6_route_rm
   \   0000BA   EE           MOV     A,R6
   \   0000BB   FA           MOV     R2,A
   \   0000BC   EF           MOV     A,R7
   \   0000BD   FB           MOV     R3,A
   \   0000BE   12....       LCALL   ??uip_ds6_route_rm?relay
   \   0000C1                ; Setup parameters for call to function uip_ds6_route_head
   \   0000C1   12....       LCALL   ??uip_ds6_route_head?relay
   \   0000C4   8A..         MOV     ?V0 + 0,R2
   \   0000C6   8B..         MOV     ?V0 + 1,R3
   \   0000C8   AE..         MOV     R6,?V0 + 0
   \   0000CA   AF..         MOV     R7,?V0 + 1
   \   0000CC   90....       MOV     DPTR,#default_instance
   \   0000CF   E0           MOVX    A,@DPTR
   \   0000D0   F8           MOV     R0,A
   \   0000D1   A3           INC     DPTR
   \   0000D2   E0           MOVX    A,@DPTR
   \   0000D3   C8           XCH     A,R0
   \   0000D4   2409         ADD     A,#0x9
   \   0000D6   F582         MOV     DPL,A
   \   0000D8   E8           MOV     A,R0
   \   0000D9   3400         ADDC    A,#0x0
   \   0000DB   F583         MOV     DPH,A
   \   0000DD   E0           MOVX    A,@DPTR
   \   0000DE   FA           MOV     R2,A
   \   0000DF   A3           INC     DPTR
   \   0000E0   E0           MOVX    A,@DPTR
   \   0000E1   FB           MOV     R3,A
   \   0000E2   EA           MOV     A,R2
   \   0000E3   2419         ADD     A,#0x19
   \   0000E5   F582         MOV     DPL,A
   \   0000E7   EB           MOV     A,R3
   \   0000E8   3400         ADDC    A,#0x0
   \   0000EA   F583         MOV     DPH,A
   \   0000EC   E0           MOVX    A,@DPTR
   \   0000ED   F8           MOV     R0,A
   \   0000EE   A3           INC     DPTR
   \   0000EF   E0           MOVX    A,@DPTR
   \   0000F0   F9           MOV     R1,A
   \   0000F1   90....       MOV     DPTR,#default_instance
   \   0000F4   E0           MOVX    A,@DPTR
   \   0000F5   FC           MOV     R4,A
   \   0000F6   A3           INC     DPTR
   \   0000F7   E0           MOVX    A,@DPTR
   \   0000F8   CC           XCH     A,R4
   \   0000F9   2488         ADD     A,#-0x78
   \   0000FB   F582         MOV     DPL,A
   \   0000FD   EC           MOV     A,R4
   \   0000FE   3400         ADDC    A,#0x0
   \   000100   F583         MOV     DPH,A
   \   000102   E0           MOVX    A,@DPTR
   \   000103   68           XRL     A,R0
   \   000104   7003         JNZ     ??rpl_purge_routes_6
   \   000106   A3           INC     DPTR
   \   000107   E0           MOVX    A,@DPTR
   \   000108   69           XRL     A,R1
   \                     ??rpl_purge_routes_6:
   \   000109   7003         JNZ     $+5
   \   00010B   02....       LJMP    ??rpl_purge_routes_3 & 0xFFFF
   \   00010E                ; Setup parameters for call to function dao_output_target
   \   00010E   7900         MOV     R1,#0x0
   \   000110   85..82       MOV     DPL,?XSP + 0
   \   000113   85..83       MOV     DPH,?XSP + 1
   \   000116   AC82         MOV     R4,DPL
   \   000118   AD83         MOV     R5,DPH
   \   00011A   EA           MOV     A,R2
   \   00011B   2417         ADD     A,#0x17
   \   00011D   F582         MOV     DPL,A
   \   00011F   EB           MOV     A,R3
   \   000120   3400         ADDC    A,#0x0
   \   000122   F583         MOV     DPH,A
   \   000124   E0           MOVX    A,@DPTR
   \   000125   FA           MOV     R2,A
   \   000126   A3           INC     DPTR
   \   000127   E0           MOVX    A,@DPTR
   \   000128   FB           MOV     R3,A
   \   000129   12....       LCALL   ??dao_output_target?relay
    107            }
    108          }
   \                     ??rpl_purge_routes_5:
   \   00012C   7410         MOV     A,#0x10
   \   00012E   12....       LCALL   ?DEALLOC_XSTACK8
   \   000131   7F04         MOV     R7,#0x4
   \   000133   02....       LJMP    ?BANKED_LEAVE_XDATA
    109          /*---------------------------------------------------------------------------*/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    110          void
    111          rpl_remove_routes(rpl_dag_t *dag)
   \                     rpl_remove_routes:
    112          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
    113            uip_ds6_route_t *r;
    114          
    115            r = uip_ds6_route_head();
   \   000009                ; Setup parameters for call to function uip_ds6_route_head
   \   000009   12....       LCALL   ??uip_ds6_route_head?relay
   \   00000C   8A..         MOV     ?V0 + 0,R2
   \   00000E   8B..         MOV     ?V0 + 1,R3
   \   000010   AA..         MOV     R2,?V0 + 0
   \   000012   AB..         MOV     R3,?V0 + 1
   \   000014   800E         SJMP    ??rpl_remove_routes_0
    116          
    117            while(r != NULL) {
    118              if(r->state.dag == dag) {
    119                uip_ds6_route_rm(r);
   \                     ??rpl_remove_routes_1:
   \   000016                ; Setup parameters for call to function uip_ds6_route_rm
   \   000016   12....       LCALL   ??uip_ds6_route_rm?relay
    120                r = uip_ds6_route_head();
   \   000019                ; Setup parameters for call to function uip_ds6_route_head
   \   000019   12....       LCALL   ??uip_ds6_route_head?relay
   \   00001C   8A..         MOV     ?V0 + 0,R2
   \   00001E   8B..         MOV     ?V0 + 1,R3
   \   000020   AA..         MOV     R2,?V0 + 0
   \   000022   AB..         MOV     R3,?V0 + 1
    121              } else {
   \                     ??rpl_remove_routes_0:
   \   000024   EA           MOV     A,R2
   \   000025   4B           ORL     A,R3
   \   000026   6024         JZ      ??rpl_remove_routes_2
   \   000028   EA           MOV     A,R2
   \   000029   2418         ADD     A,#0x18
   \   00002B   F582         MOV     DPL,A
   \   00002D   EB           MOV     A,R3
   \   00002E   3400         ADDC    A,#0x0
   \   000030   F583         MOV     DPH,A
   \   000032   E0           MOVX    A,@DPTR
   \   000033   F8           MOV     R0,A
   \   000034   A3           INC     DPTR
   \   000035   E0           MOVX    A,@DPTR
   \   000036   F9           MOV     R1,A
   \   000037   EE           MOV     A,R6
   \   000038   68           XRL     A,R0
   \   000039   7002         JNZ     ??rpl_remove_routes_3
   \   00003B   EF           MOV     A,R7
   \   00003C   69           XRL     A,R1
   \                     ??rpl_remove_routes_3:
   \   00003D   60D7         JZ      ??rpl_remove_routes_1
    122                r = uip_ds6_route_next(r);
   \   00003F                ; Setup parameters for call to function uip_ds6_route_next
   \   00003F   12....       LCALL   ??uip_ds6_route_next?relay
   \   000042   8A..         MOV     ?V0 + 0,R2
   \   000044   8B..         MOV     ?V0 + 1,R3
   \   000046   AA..         MOV     R2,?V0 + 0
   \   000048   AB..         MOV     R3,?V0 + 1
   \   00004A   80D8         SJMP    ??rpl_remove_routes_0
    123              }
    124            }
    125          }
   \                     ??rpl_remove_routes_2:
   \   00004C   7F02         MOV     R7,#0x2
   \   00004E   02....       LJMP    ?BANKED_LEAVE_XDATA
    126          /*---------------------------------------------------------------------------*/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    127          void
    128          rpl_remove_routes_by_nexthop(uip_ipaddr_t *nexthop, rpl_dag_t *dag)
   \                     rpl_remove_routes_by_nexthop:
    129          {
   \   000000   74F2         MOV     A,#-0xe
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 14
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
   \   000009   8C..         MOV     ?V0 + 2,R4
   \   00000B   8D..         MOV     ?V0 + 3,R5
    130            uip_ds6_route_t *r;
    131          
    132            r = uip_ds6_route_head();
   \   00000D                ; Setup parameters for call to function uip_ds6_route_head
   \   00000D   12....       LCALL   ??uip_ds6_route_head?relay
   \   000010   8A..         MOV     ?V0 + 4,R2
   \   000012   8B..         MOV     ?V0 + 5,R3
   \   000014   85....       MOV     ?V0 + 0,?V0 + 4
   \   000017   85....       MOV     ?V0 + 1,?V0 + 5
   \   00001A   8014         SJMP    ??rpl_remove_routes_by_nexthop_0
    133          
    134            while(r != NULL) {
    135              if(uip_ipaddr_cmp(uip_ds6_route_nexthop(r), nexthop) &&
    136                 r->state.dag == dag) {
    137                uip_ds6_route_rm(r);
   \                     ??rpl_remove_routes_by_nexthop_1:
   \   00001C                ; Setup parameters for call to function uip_ds6_route_rm
   \   00001C   AA..         MOV     R2,?V0 + 0
   \   00001E   AB..         MOV     R3,?V0 + 1
   \   000020   12....       LCALL   ??uip_ds6_route_rm?relay
    138                r = uip_ds6_route_head();
   \   000023                ; Setup parameters for call to function uip_ds6_route_head
   \   000023   12....       LCALL   ??uip_ds6_route_head?relay
   \   000026   8A..         MOV     ?V0 + 4,R2
   \   000028   8B..         MOV     ?V0 + 5,R3
   \   00002A   85....       MOV     ?V0 + 0,?V0 + 4
   \   00002D   85....       MOV     ?V0 + 1,?V0 + 5
    139              } else {
   \                     ??rpl_remove_routes_by_nexthop_0:
   \   000030   E5..         MOV     A,?V0 + 0
   \   000032   45..         ORL     A,?V0 + 1
   \   000034   6060         JZ      ??rpl_remove_routes_by_nexthop_2
   \   000036                ; Setup parameters for call to function memcmp
   \   000036   75..10       MOV     ?V0 + 4,#0x10
   \   000039   75..00       MOV     ?V0 + 5,#0x0
   \   00003C   78..         MOV     R0,#?V0 + 4
   \   00003E   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000041   EE           MOV     A,R6
   \   000042   FC           MOV     R4,A
   \   000043   EF           MOV     A,R7
   \   000044   FD           MOV     R5,A
   \   000045   FF           MOV     R7,A
   \   000046   EC           MOV     A,R4
   \   000047   FE           MOV     R6,A
   \   000048   ED           MOV     A,R5
   \   000049   FF           MOV     R7,A
   \   00004A                ; Setup parameters for call to function uip_ds6_route_nexthop
   \   00004A   AA..         MOV     R2,?V0 + 0
   \   00004C   AB..         MOV     R3,?V0 + 1
   \   00004E   12....       LCALL   ??uip_ds6_route_nexthop?relay
   \   000051   FD           MOV     R5,A
   \   000052   EE           MOV     A,R6
   \   000053   FC           MOV     R4,A
   \   000054   EF           MOV     A,R7
   \   000055   FD           MOV     R5,A
   \   000056   12....       LCALL   ??memcmp?relay
   \   000059   7402         MOV     A,#0x2
   \   00005B   12....       LCALL   ?DEALLOC_XSTACK8
   \   00005E   8A..         MOV     ?V0 + 4,R2
   \   000060   8B..         MOV     ?V0 + 5,R3
   \   000062   E5..         MOV     A,?V0 + 4
   \   000064   45..         ORL     A,?V0 + 5
   \   000066   701B         JNZ     ??rpl_remove_routes_by_nexthop_3
   \   000068   E5..         MOV     A,?V0 + 0
   \   00006A   2418         ADD     A,#0x18
   \   00006C   F582         MOV     DPL,A
   \   00006E   E5..         MOV     A,?V0 + 1
   \   000070   3400         ADDC    A,#0x0
   \   000072   F583         MOV     DPH,A
   \   000074   E0           MOVX    A,@DPTR
   \   000075   F8           MOV     R0,A
   \   000076   A3           INC     DPTR
   \   000077   E0           MOVX    A,@DPTR
   \   000078   F9           MOV     R1,A
   \   000079   E5..         MOV     A,?V0 + 2
   \   00007B   68           XRL     A,R0
   \   00007C   7003         JNZ     ??rpl_remove_routes_by_nexthop_4
   \   00007E   E5..         MOV     A,?V0 + 3
   \   000080   69           XRL     A,R1
   \                     ??rpl_remove_routes_by_nexthop_4:
   \   000081   6099         JZ      ??rpl_remove_routes_by_nexthop_1
    140                r = uip_ds6_route_next(r);
   \                     ??rpl_remove_routes_by_nexthop_3:
   \   000083                ; Setup parameters for call to function uip_ds6_route_next
   \   000083   AA..         MOV     R2,?V0 + 0
   \   000085   AB..         MOV     R3,?V0 + 1
   \   000087   12....       LCALL   ??uip_ds6_route_next?relay
   \   00008A   8A..         MOV     ?V0 + 4,R2
   \   00008C   8B..         MOV     ?V0 + 5,R3
   \   00008E   85....       MOV     ?V0 + 0,?V0 + 4
   \   000091   85....       MOV     ?V0 + 1,?V0 + 5
   \   000094   809A         SJMP    ??rpl_remove_routes_by_nexthop_0
    141              }
    142            }
    143            ANNOTATE("#L %u 0\n", nexthop->u8[sizeof(uip_ipaddr_t) - 1]);
    144          }
   \                     ??rpl_remove_routes_by_nexthop_2:
   \   000096   7F06         MOV     R7,#0x6
   \   000098   02....       LJMP    ?BANKED_LEAVE_XDATA
    145          /*---------------------------------------------------------------------------*/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    146          uip_ds6_route_t *
    147          rpl_add_route(rpl_dag_t *dag, uip_ipaddr_t *prefix, int prefix_len,
   \                     rpl_add_route:
    148                        uip_ipaddr_t *next_hop)
    149          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
   \   000009   EC           MOV     A,R4
   \   00000A   FA           MOV     R2,A
   \   00000B   ED           MOV     A,R5
   \   00000C   FB           MOV     R3,A
   \   00000D   7410         MOV     A,#0x10
   \   00000F   12....       LCALL   ?XSTACK_DISP0_8
   \   000012   E0           MOVX    A,@DPTR
   \   000013   F8           MOV     R0,A
   \   000014   A3           INC     DPTR
   \   000015   E0           MOVX    A,@DPTR
   \   000016   F9           MOV     R1,A
   \   000017   7412         MOV     A,#0x12
   \   000019   12....       LCALL   ?XSTACK_DISP0_8
   \   00001C   E0           MOVX    A,@DPTR
   \   00001D   FC           MOV     R4,A
   \   00001E   A3           INC     DPTR
   \   00001F   E0           MOVX    A,@DPTR
   \   000020   FD           MOV     R5,A
    150            uip_ds6_route_t *rep;
    151          
    152            if((rep = uip_ds6_route_add(prefix, prefix_len, next_hop)) == NULL) {
   \   000021                ; Setup parameters for call to function uip_ds6_route_add
   \   000021   E8           MOV     A,R0
   \   000022   F9           MOV     R1,A
   \   000023   12....       LCALL   ??uip_ds6_route_add?relay
   \   000026   8A..         MOV     ?V0 + 0,R2
   \   000028   8B..         MOV     ?V0 + 1,R3
   \   00002A   A8..         MOV     R0,?V0 + 0
   \   00002C   A9..         MOV     R1,?V0 + 1
   \   00002E   E8           MOV     A,R0
   \   00002F   FA           MOV     R2,A
   \   000030   E9           MOV     A,R1
   \   000031   FB           MOV     R3,A
   \   000032   E8           MOV     A,R0
   \   000033   49           ORL     A,R1
   \   000034   7006         JNZ     ??rpl_add_route_0
    153              PRINTF("RPL: No space for more route entries\n");
    154              return NULL;
   \   000036   7A00         MOV     R2,#0x0
   \   000038   7B00         MOV     R3,#0x0
   \   00003A   8078         SJMP    ??rpl_add_route_1
    155            }
    156          
    157            rep->state.dag = dag;
   \                     ??rpl_add_route_0:
   \   00003C   EA           MOV     A,R2
   \   00003D   2418         ADD     A,#0x18
   \   00003F   F582         MOV     DPL,A
   \   000041   EB           MOV     A,R3
   \   000042   3400         ADDC    A,#0x0
   \   000044   F583         MOV     DPH,A
   \   000046   EE           MOV     A,R6
   \   000047   F0           MOVX    @DPTR,A
   \   000048   A3           INC     DPTR
   \   000049   EF           MOV     A,R7
   \   00004A   F0           MOVX    @DPTR,A
    158            rep->state.lifetime = RPL_LIFETIME(dag->instance, dag->instance->default_lifetime);
   \   00004B   EE           MOV     A,R6
   \   00004C   241B         ADD     A,#0x1b
   \   00004E   F582         MOV     DPL,A
   \   000050   EF           MOV     A,R7
   \   000051   3400         ADDC    A,#0x0
   \   000053   F583         MOV     DPH,A
   \   000055   E0           MOVX    A,@DPTR
   \   000056   F8           MOV     R0,A
   \   000057   A3           INC     DPTR
   \   000058   E0           MOVX    A,@DPTR
   \   000059   C8           XCH     A,R0
   \   00005A   248A         ADD     A,#-0x76
   \   00005C   F582         MOV     DPL,A
   \   00005E   E8           MOV     A,R0
   \   00005F   3400         ADDC    A,#0x0
   \   000061   F583         MOV     DPH,A
   \   000063   E0           MOVX    A,@DPTR
   \   000064   F5..         MOV     ?V0 + 0,A
   \   000066   A3           INC     DPTR
   \   000067   E0           MOVX    A,@DPTR
   \   000068   F5..         MOV     ?V0 + 1,A
   \   00006A   E4           CLR     A
   \   00006B   F5..         MOV     ?V0 + 2,A
   \   00006D   F5..         MOV     ?V0 + 3,A
   \   00006F   EE           MOV     A,R6
   \   000070   241B         ADD     A,#0x1b
   \   000072   F582         MOV     DPL,A
   \   000074   EF           MOV     A,R7
   \   000075   3400         ADDC    A,#0x0
   \   000077   F583         MOV     DPH,A
   \   000079   E0           MOVX    A,@DPTR
   \   00007A   F8           MOV     R0,A
   \   00007B   A3           INC     DPTR
   \   00007C   E0           MOVX    A,@DPTR
   \   00007D   C8           XCH     A,R0
   \   00007E   2482         ADD     A,#-0x7e
   \   000080   F582         MOV     DPL,A
   \   000082   E8           MOV     A,R0
   \   000083   3400         ADDC    A,#0x0
   \   000085   F583         MOV     DPH,A
   \   000087   E0           MOVX    A,@DPTR
   \   000088   F5..         MOV     ?V0 + 4,A
   \   00008A   E4           CLR     A
   \   00008B   F5..         MOV     ?V0 + 5,A
   \   00008D   F5..         MOV     ?V0 + 6,A
   \   00008F   F5..         MOV     ?V0 + 7,A
   \   000091   78..         MOV     R0,#?V0 + 0
   \   000093   79..         MOV     R1,#?V0 + 4
   \   000095   12....       LCALL   ?L_MUL
   \   000098   EA           MOV     A,R2
   \   000099   2414         ADD     A,#0x14
   \   00009B   F582         MOV     DPL,A
   \   00009D   EB           MOV     A,R3
   \   00009E   3400         ADDC    A,#0x0
   \   0000A0   F583         MOV     DPH,A
   \   0000A2   78..         MOV     R0,#?V0 + 0
   \   0000A4   12....       LCALL   ?L_MOV_TO_X
    159            rep->state.learned_from = RPL_ROUTE_FROM_INTERNAL;
   \   0000A7   EA           MOV     A,R2
   \   0000A8   241A         ADD     A,#0x1a
   \   0000AA   F582         MOV     DPL,A
   \   0000AC   EB           MOV     A,R3
   \   0000AD   3400         ADDC    A,#0x0
   \   0000AF   F583         MOV     DPH,A
   \   0000B1   7400         MOV     A,#0x0
   \   0000B3   F0           MOVX    @DPTR,A
    160          
    161            PRINTF("RPL: Added a route to ");
    162            PRINT6ADDR(prefix);
    163            PRINTF("/%d via ", prefix_len);
    164            PRINT6ADDR(next_hop);
    165            PRINTF("\n");
    166          
    167            return rep;
   \                     ??rpl_add_route_1:
   \   0000B4   7F08         MOV     R7,#0x8
   \   0000B6   02....       LJMP    ?BANKED_LEAVE_XDATA
    168          }
    169          /*---------------------------------------------------------------------------*/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    170          void
    171          rpl_link_neighbor_callback(const rimeaddr_t *addr, int status, int numtx)
   \                     rpl_link_neighbor_callback:
    172          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 16
   \   000005   74F0         MOV     A,#-0x10
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   8C..         MOV     ?V0 + 0,R4
   \   00000C   8D..         MOV     ?V0 + 1,R5
    173            uip_ipaddr_t ipaddr;
    174            rpl_parent_t *parent;
    175            rpl_instance_t *instance;
    176            rpl_instance_t *end;
    177          
    178            uip_ip6addr(&ipaddr, 0xfe80, 0, 0, 0, 0, 0, 0, 0);
   \   00000E   85..82       MOV     DPL,?XSP + 0
   \   000011   85..83       MOV     DPH,?XSP + 1
   \   000014   74FE         MOV     A,#-0x2
   \   000016   F0           MOVX    @DPTR,A
   \   000017   A3           INC     DPTR
   \   000018   7480         MOV     A,#-0x80
   \   00001A   F0           MOVX    @DPTR,A
   \   00001B   7402         MOV     A,#0x2
   \   00001D   12....       LCALL   ?XSTACK_DISP0_8
   \   000020   7400         MOV     A,#0x0
   \   000022   F0           MOVX    @DPTR,A
   \   000023   A3           INC     DPTR
   \   000024   7400         MOV     A,#0x0
   \   000026   F0           MOVX    @DPTR,A
   \   000027   7404         MOV     A,#0x4
   \   000029   12....       LCALL   ?XSTACK_DISP0_8
   \   00002C   7400         MOV     A,#0x0
   \   00002E   F0           MOVX    @DPTR,A
   \   00002F   A3           INC     DPTR
   \   000030   7400         MOV     A,#0x0
   \   000032   F0           MOVX    @DPTR,A
   \   000033   7406         MOV     A,#0x6
   \   000035   12....       LCALL   ?XSTACK_DISP0_8
   \   000038   7400         MOV     A,#0x0
   \   00003A   F0           MOVX    @DPTR,A
   \   00003B   A3           INC     DPTR
   \   00003C   7400         MOV     A,#0x0
   \   00003E   F0           MOVX    @DPTR,A
   \   00003F   7408         MOV     A,#0x8
   \   000041   12....       LCALL   ?XSTACK_DISP0_8
   \   000044   7400         MOV     A,#0x0
   \   000046   F0           MOVX    @DPTR,A
   \   000047   A3           INC     DPTR
   \   000048   7400         MOV     A,#0x0
   \   00004A   F0           MOVX    @DPTR,A
   \   00004B   740A         MOV     A,#0xa
   \   00004D   12....       LCALL   ?XSTACK_DISP0_8
   \   000050   7400         MOV     A,#0x0
   \   000052   F0           MOVX    @DPTR,A
   \   000053   A3           INC     DPTR
   \   000054   7400         MOV     A,#0x0
   \   000056   F0           MOVX    @DPTR,A
   \   000057   740C         MOV     A,#0xc
   \   000059   12....       LCALL   ?XSTACK_DISP0_8
   \   00005C   7400         MOV     A,#0x0
   \   00005E   F0           MOVX    @DPTR,A
   \   00005F   A3           INC     DPTR
   \   000060   7400         MOV     A,#0x0
   \   000062   F0           MOVX    @DPTR,A
   \   000063   740E         MOV     A,#0xe
   \   000065   12....       LCALL   ?XSTACK_DISP0_8
   \   000068   7400         MOV     A,#0x0
   \   00006A   F0           MOVX    @DPTR,A
   \   00006B   A3           INC     DPTR
   \   00006C   7400         MOV     A,#0x0
   \   00006E   F0           MOVX    @DPTR,A
    179            uip_ds6_set_addr_iid(&ipaddr, (uip_lladdr_t *)addr);
   \   00006F                ; Setup parameters for call to function uip_ds6_set_addr_iid
   \   00006F   EA           MOV     A,R2
   \   000070   FC           MOV     R4,A
   \   000071   EB           MOV     A,R3
   \   000072   FD           MOV     R5,A
   \   000073   85..82       MOV     DPL,?XSP + 0
   \   000076   85..83       MOV     DPH,?XSP + 1
   \   000079   AA82         MOV     R2,DPL
   \   00007B   AB83         MOV     R3,DPH
   \   00007D   12....       LCALL   ??uip_ds6_set_addr_iid?relay
    180          
    181            for(instance = &instance_table[0], end = instance + RPL_MAX_INSTANCES; instance < end; ++instance) {
   \   000080   7E..         MOV     R6,#instance_table & 0xff
   \   000082   7F..         MOV     R7,#(instance_table >> 8) & 0xff
   \   000084   EE           MOV     A,R6
   \   000085   24AE         ADD     A,#-0x52
   \   000087   F5..         MOV     ?V0 + 2,A
   \   000089   EF           MOV     A,R7
   \   00008A   3400         ADDC    A,#0x0
   \   00008C   F5..         MOV     ?V0 + 3,A
   \   00008E   7420         MOV     A,#0x20
   \   000090   12....       LCALL   ?XSTACK_DISP0_8
   \   000093   E0           MOVX    A,@DPTR
   \   000094   F5..         MOV     ?V0 + 4,A
   \   000096   A3           INC     DPTR
   \   000097   E0           MOVX    A,@DPTR
   \   000098   F5..         MOV     ?V0 + 5,A
   \   00009A   02....       LJMP    ??rpl_link_neighbor_callback_0 & 0xFFFF
    182              if(instance->used == 1 ) {
   \                     ??rpl_link_neighbor_callback_1:
   \   00009D   EE           MOV     A,R6
   \   00009E   247C         ADD     A,#0x7c
   \   0000A0   F582         MOV     DPL,A
   \   0000A2   EF           MOV     A,R7
   \   0000A3   3400         ADDC    A,#0x0
   \   0000A5   F583         MOV     DPH,A
   \   0000A7   E0           MOVX    A,@DPTR
   \   0000A8   6401         XRL     A,#0x1
   \   0000AA   7079         JNZ     ??rpl_link_neighbor_callback_2
    183                parent = rpl_find_parent_any_dag(instance, &ipaddr);
   \   0000AC                ; Setup parameters for call to function rpl_find_parent_any_dag
   \   0000AC   85..82       MOV     DPL,?XSP + 0
   \   0000AF   85..83       MOV     DPH,?XSP + 1
   \   0000B2   AC82         MOV     R4,DPL
   \   0000B4   AD83         MOV     R5,DPH
   \   0000B6   EE           MOV     A,R6
   \   0000B7   FA           MOV     R2,A
   \   0000B8   EF           MOV     A,R7
   \   0000B9   FB           MOV     R3,A
   \   0000BA   12....       LCALL   ??rpl_find_parent_any_dag?relay
   \   0000BD   8A..         MOV     ?V0 + 6,R2
   \   0000BF   8B..         MOV     ?V0 + 7,R3
   \   0000C1   AA..         MOV     R2,?V0 + 6
   \   0000C3   AB..         MOV     R3,?V0 + 7
    184                if(parent != NULL) {
   \   0000C5   EA           MOV     A,R2
   \   0000C6   4B           ORL     A,R3
   \   0000C7   605C         JZ      ??rpl_link_neighbor_callback_2
    185                  /* Trigger DAG rank recalculation. */
    186                  PRINTF("RPL: rpl_link_neighbor_callback triggering update\n");
    187                  parent->updated = 1;
   \   0000C9   8A82         MOV     DPL,R2
   \   0000CB   8B83         MOV     DPH,R3
   \   0000CD   A3           INC     DPTR
   \   0000CE   A3           INC     DPTR
   \   0000CF   A3           INC     DPTR
   \   0000D0   A3           INC     DPTR
   \   0000D1   A3           INC     DPTR
   \   0000D2   A3           INC     DPTR
   \   0000D3   A3           INC     DPTR
   \   0000D4   A3           INC     DPTR
   \   0000D5   A3           INC     DPTR
   \   0000D6   7401         MOV     A,#0x1
   \   0000D8   F0           MOVX    @DPTR,A
    188                  if(instance->of->neighbor_link_callback != NULL) {
   \   0000D9   8E82         MOV     DPL,R6
   \   0000DB   8F83         MOV     DPH,R7
   \   0000DD   A3           INC     DPTR
   \   0000DE   A3           INC     DPTR
   \   0000DF   A3           INC     DPTR
   \   0000E0   A3           INC     DPTR
   \   0000E1   A3           INC     DPTR
   \   0000E2   A3           INC     DPTR
   \   0000E3   A3           INC     DPTR
   \   0000E4   E0           MOVX    A,@DPTR
   \   0000E5   F8           MOV     R0,A
   \   0000E6   A3           INC     DPTR
   \   0000E7   E0           MOVX    A,@DPTR
   \   0000E8   F583         MOV     DPH,A
   \   0000EA   8882         MOV     DPL,R0
   \   0000EC   A3           INC     DPTR
   \   0000ED   A3           INC     DPTR
   \   0000EE   E0           MOVX    A,@DPTR
   \   0000EF   F8           MOV     R0,A
   \   0000F0   A3           INC     DPTR
   \   0000F1   E0           MOVX    A,@DPTR
   \   0000F2   F9           MOV     R1,A
   \   0000F3   E8           MOV     A,R0
   \   0000F4   49           ORL     A,R1
   \   0000F5   602E         JZ      ??rpl_link_neighbor_callback_2
    189                    instance->of->neighbor_link_callback(parent, status, numtx);
   \   0000F7                ; Setup parameters for indirect call
   \   0000F7   78..         MOV     R0,#?V0 + 4
   \   0000F9   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000FC   AC..         MOV     R4,?V0 + 0
   \   0000FE   AD..         MOV     R5,?V0 + 1
   \   000100   8E82         MOV     DPL,R6
   \   000102   8F83         MOV     DPH,R7
   \   000104   A3           INC     DPTR
   \   000105   A3           INC     DPTR
   \   000106   A3           INC     DPTR
   \   000107   A3           INC     DPTR
   \   000108   A3           INC     DPTR
   \   000109   A3           INC     DPTR
   \   00010A   A3           INC     DPTR
   \   00010B   E0           MOVX    A,@DPTR
   \   00010C   F8           MOV     R0,A
   \   00010D   A3           INC     DPTR
   \   00010E   E0           MOVX    A,@DPTR
   \   00010F   F583         MOV     DPH,A
   \   000111   8882         MOV     DPL,R0
   \   000113   A3           INC     DPTR
   \   000114   A3           INC     DPTR
   \   000115   E0           MOVX    A,@DPTR
   \   000116   F8           MOV     R0,A
   \   000117   A3           INC     DPTR
   \   000118   E0           MOVX    A,@DPTR
   \   000119   F583         MOV     DPH,A
   \   00011B   8882         MOV     DPL,R0
   \   00011D   12....       LCALL   ?CALL_IND
   \   000120   7402         MOV     A,#0x2
   \   000122   12....       LCALL   ?DEALLOC_XSTACK8
    190                  }
    191                }
    192              }
    193            }
   \                     ??rpl_link_neighbor_callback_2:
   \   000125   EE           MOV     A,R6
   \   000126   24AE         ADD     A,#-0x52
   \   000128   FE           MOV     R6,A
   \   000129   EF           MOV     A,R7
   \   00012A   3400         ADDC    A,#0x0
   \   00012C   FF           MOV     R7,A
   \                     ??rpl_link_neighbor_callback_0:
   \   00012D   C3           CLR     C
   \   00012E   EE           MOV     A,R6
   \   00012F   95..         SUBB    A,?V0 + 2
   \   000131   EF           MOV     A,R7
   \   000132   95..         SUBB    A,?V0 + 3
   \   000134   5003         JNC     $+5
   \   000136   02....       LJMP    ??rpl_link_neighbor_callback_1 & 0xFFFF
    194          }
   \   000139   7410         MOV     A,#0x10
   \   00013B   12....       LCALL   ?DEALLOC_XSTACK8
   \   00013E   7F08         MOV     R7,#0x8
   \   000140   02....       LJMP    ?BANKED_LEAVE_XDATA
    195          /*---------------------------------------------------------------------------*/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    196          void
    197          rpl_ipv6_neighbor_callback(uip_ds6_nbr_t *nbr)
   \                     rpl_ipv6_neighbor_callback:
    198          {
   \   000000   74F2         MOV     A,#-0xe
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 14
   \   000005                ; Auto size: 0
   \   000005   8A..         MOV     ?V0 + 0,R2
   \   000007   8B..         MOV     ?V0 + 1,R3
    199            rpl_parent_t *p;
    200            rpl_instance_t *instance;
    201            rpl_instance_t *end;
    202          
    203            PRINTF("RPL: Removing neighbor ");
    204            PRINT6ADDR(&nbr->ipaddr);
    205            PRINTF("\n");
    206            for(instance = &instance_table[0], end = instance + RPL_MAX_INSTANCES; instance < end; ++instance) {
   \   000009   7E..         MOV     R6,#instance_table & 0xff
   \   00000B   7F..         MOV     R7,#(instance_table >> 8) & 0xff
   \   00000D   EE           MOV     A,R6
   \   00000E   24AE         ADD     A,#-0x52
   \   000010   F5..         MOV     ?V0 + 2,A
   \   000012   EF           MOV     A,R7
   \   000013   3400         ADDC    A,#0x0
   \   000015   F5..         MOV     ?V0 + 3,A
   \   000017   804D         SJMP    ??rpl_ipv6_neighbor_callback_0
    207              if(instance->used == 1 ) {
   \                     ??rpl_ipv6_neighbor_callback_1:
   \   000019   EE           MOV     A,R6
   \   00001A   247C         ADD     A,#0x7c
   \   00001C   F582         MOV     DPL,A
   \   00001E   EF           MOV     A,R7
   \   00001F   3400         ADDC    A,#0x0
   \   000021   F583         MOV     DPH,A
   \   000023   E0           MOVX    A,@DPTR
   \   000024   6401         XRL     A,#0x1
   \   000026   7036         JNZ     ??rpl_ipv6_neighbor_callback_2
    208                p = rpl_find_parent_any_dag(instance, &nbr->ipaddr);
   \   000028                ; Setup parameters for call to function rpl_find_parent_any_dag
   \   000028   AC..         MOV     R4,?V0 + 0
   \   00002A   AD..         MOV     R5,?V0 + 1
   \   00002C   EE           MOV     A,R6
   \   00002D   FA           MOV     R2,A
   \   00002E   EF           MOV     A,R7
   \   00002F   FB           MOV     R3,A
   \   000030   12....       LCALL   ??rpl_find_parent_any_dag?relay
   \   000033   8A..         MOV     ?V0 + 4,R2
   \   000035   8B..         MOV     ?V0 + 5,R3
   \   000037   A8..         MOV     R0,?V0 + 4
   \   000039   A9..         MOV     R1,?V0 + 5
    209                if(p != NULL) {
   \   00003B   E8           MOV     A,R0
   \   00003C   49           ORL     A,R1
   \   00003D   601F         JZ      ??rpl_ipv6_neighbor_callback_2
    210                  p->rank = INFINITE_RANK;
   \   00003F   8882         MOV     DPL,R0
   \   000041   8983         MOV     DPH,R1
   \   000043   A3           INC     DPTR
   \   000044   A3           INC     DPTR
   \   000045   A3           INC     DPTR
   \   000046   A3           INC     DPTR
   \   000047   74FF         MOV     A,#-0x1
   \   000049   F0           MOVX    @DPTR,A
   \   00004A   A3           INC     DPTR
   \   00004B   74FF         MOV     A,#-0x1
   \   00004D   F0           MOVX    @DPTR,A
    211                  /* Trigger DAG rank recalculation. */
    212                  PRINTF("RPL: rpl_ipv6_neighbor_callback infinite rank\n");
    213                  p->updated = 1;
   \   00004E   8882         MOV     DPL,R0
   \   000050   8983         MOV     DPH,R1
   \   000052   A3           INC     DPTR
   \   000053   A3           INC     DPTR
   \   000054   A3           INC     DPTR
   \   000055   A3           INC     DPTR
   \   000056   A3           INC     DPTR
   \   000057   A3           INC     DPTR
   \   000058   A3           INC     DPTR
   \   000059   A3           INC     DPTR
   \   00005A   A3           INC     DPTR
   \   00005B   7401         MOV     A,#0x1
   \   00005D   F0           MOVX    @DPTR,A
    214                }
    215              }
    216            }
   \                     ??rpl_ipv6_neighbor_callback_2:
   \   00005E   EE           MOV     A,R6
   \   00005F   24AE         ADD     A,#-0x52
   \   000061   FE           MOV     R6,A
   \   000062   EF           MOV     A,R7
   \   000063   3400         ADDC    A,#0x0
   \   000065   FF           MOV     R7,A
   \                     ??rpl_ipv6_neighbor_callback_0:
   \   000066   A8..         MOV     R0,?V0 + 2
   \   000068   A9..         MOV     R1,?V0 + 3
   \   00006A   C3           CLR     C
   \   00006B   EE           MOV     A,R6
   \   00006C   98           SUBB    A,R0
   \   00006D   EF           MOV     A,R7
   \   00006E   99           SUBB    A,R1
   \   00006F   40A8         JC      ??rpl_ipv6_neighbor_callback_1
    217          }
   \   000071   7F06         MOV     R7,#0x6
   \   000073   02....       LJMP    ?BANKED_LEAVE_XDATA
    218          /*---------------------------------------------------------------------------*/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    219          void
    220          rpl_init(void)
   \                     rpl_init:
    221          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 16
   \   000004   74F0         MOV     A,#-0x10
   \   000006   12....       LCALL   ?ALLOC_XSTACK8
    222            uip_ipaddr_t rplmaddr;
    223            PRINTF("RPL started\n");
    224            default_instance = NULL;
   \   000009   90....       MOV     DPTR,#default_instance
   \   00000C   7400         MOV     A,#0x0
   \   00000E   F0           MOVX    @DPTR,A
   \   00000F   A3           INC     DPTR
   \   000010   7400         MOV     A,#0x0
   \   000012   F0           MOVX    @DPTR,A
    225          
    226            rpl_dag_init();
   \   000013                ; Setup parameters for call to function rpl_dag_init
   \   000013   12....       LCALL   ??rpl_dag_init?relay
    227            rpl_reset_periodic_timer();
   \   000016                ; Setup parameters for call to function rpl_reset_periodic_timer
   \   000016   12....       LCALL   ??rpl_reset_periodic_timer?relay
    228          
    229            /* add rpl multicast address */
    230            uip_create_linklocal_rplnodes_mcast(&rplmaddr);
   \   000019   85..82       MOV     DPL,?XSP + 0
   \   00001C   85..83       MOV     DPH,?XSP + 1
   \   00001F   74FF         MOV     A,#-0x1
   \   000021   F0           MOVX    @DPTR,A
   \   000022   A3           INC     DPTR
   \   000023   7402         MOV     A,#0x2
   \   000025   F0           MOVX    @DPTR,A
   \   000026   7402         MOV     A,#0x2
   \   000028   12....       LCALL   ?XSTACK_DISP0_8
   \   00002B   7400         MOV     A,#0x0
   \   00002D   F0           MOVX    @DPTR,A
   \   00002E   A3           INC     DPTR
   \   00002F   7400         MOV     A,#0x0
   \   000031   F0           MOVX    @DPTR,A
   \   000032   7404         MOV     A,#0x4
   \   000034   12....       LCALL   ?XSTACK_DISP0_8
   \   000037   7400         MOV     A,#0x0
   \   000039   F0           MOVX    @DPTR,A
   \   00003A   A3           INC     DPTR
   \   00003B   7400         MOV     A,#0x0
   \   00003D   F0           MOVX    @DPTR,A
   \   00003E   7406         MOV     A,#0x6
   \   000040   12....       LCALL   ?XSTACK_DISP0_8
   \   000043   7400         MOV     A,#0x0
   \   000045   F0           MOVX    @DPTR,A
   \   000046   A3           INC     DPTR
   \   000047   7400         MOV     A,#0x0
   \   000049   F0           MOVX    @DPTR,A
   \   00004A   7408         MOV     A,#0x8
   \   00004C   12....       LCALL   ?XSTACK_DISP0_8
   \   00004F   7400         MOV     A,#0x0
   \   000051   F0           MOVX    @DPTR,A
   \   000052   A3           INC     DPTR
   \   000053   7400         MOV     A,#0x0
   \   000055   F0           MOVX    @DPTR,A
   \   000056   740A         MOV     A,#0xa
   \   000058   12....       LCALL   ?XSTACK_DISP0_8
   \   00005B   7400         MOV     A,#0x0
   \   00005D   F0           MOVX    @DPTR,A
   \   00005E   A3           INC     DPTR
   \   00005F   7400         MOV     A,#0x0
   \   000061   F0           MOVX    @DPTR,A
   \   000062   740C         MOV     A,#0xc
   \   000064   12....       LCALL   ?XSTACK_DISP0_8
   \   000067   7400         MOV     A,#0x0
   \   000069   F0           MOVX    @DPTR,A
   \   00006A   A3           INC     DPTR
   \   00006B   7400         MOV     A,#0x0
   \   00006D   F0           MOVX    @DPTR,A
   \   00006E   740E         MOV     A,#0xe
   \   000070   12....       LCALL   ?XSTACK_DISP0_8
   \   000073   7400         MOV     A,#0x0
   \   000075   F0           MOVX    @DPTR,A
   \   000076   A3           INC     DPTR
   \   000077   741A         MOV     A,#0x1a
   \   000079   F0           MOVX    @DPTR,A
    231            uip_ds6_maddr_add(&rplmaddr);
   \   00007A                ; Setup parameters for call to function uip_ds6_maddr_add
   \   00007A   85..82       MOV     DPL,?XSP + 0
   \   00007D   85..83       MOV     DPH,?XSP + 1
   \   000080   AA82         MOV     R2,DPL
   \   000082   AB83         MOV     R3,DPH
   \   000084   12....       LCALL   ??uip_ds6_maddr_add?relay
    232          
    233          #if RPL_CONF_STATS
    234            memset(&rpl_stats, 0, sizeof(rpl_stats));
    235          #endif
    236          }
   \   000087   7410         MOV     A,#0x10
   \   000089   12....       LCALL   ?DEALLOC_XSTACK8
   \   00008C   D083         POP     DPH
   \   00008E   D082         POP     DPL
   \   000090   02....       LJMP    ?BRET

   \                                 In  segment XDATA_I, align 1, keep-with-next
   \                     __Constant_ffffffff:
   \   000000                DS 4
   \   000004                REQUIRE `?<Initializer for __Constant_ffffffff>`
   \   000004                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for __Constant_ffffffff>`:
   \   000000   FFFFFFFF     DD 4294967295

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??rpl_purge_routes?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    rpl_purge_routes

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??rpl_remove_routes?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    rpl_remove_routes

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??rpl_remove_routes_by_nexthop?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    rpl_remove_routes_by_nexthop

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??rpl_add_route?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    rpl_add_route

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??rpl_link_neighbor_callback?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    rpl_link_neighbor_callback

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??rpl_ipv6_neighbor_callback?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    rpl_ipv6_neighbor_callback

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??rpl_init?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    rpl_init
    237          /*---------------------------------------------------------------------------*/
    238          #endif /* UIP_CONF_IPV6 */

   Maximum stack usage in bytes:

   ISTACK PSTACK XSTACK Function
   ------ ------ ------ --------
       0      0     20  rpl_add_route
                          0 0 16 -> uip_ds6_route_add
       2      0     16  rpl_init
                          2 0 16 -> rpl_dag_init
                          2 0 16 -> rpl_reset_periodic_timer
                          2 0 16 -> uip_ds6_maddr_add
       0      0     14  rpl_ipv6_neighbor_callback
                          0 0 14 -> rpl_find_parent_any_dag
       0      0     36  rpl_link_neighbor_callback
                          0 0 32 -> rpl_find_parent_any_dag
                          0 0 32 -> uip_ds6_set_addr_iid
       0      0     30  rpl_purge_routes
                          0 0 28 -> dao_output_target
                          0 0 30 -> memcpy
                          0 0 28 -> uip_ds6_route_head
                          0 0 28 -> uip_ds6_route_next
                          0 0 28 -> uip_ds6_route_rm
       0      0     10  rpl_remove_routes
                          0 0 10 -> uip_ds6_route_head
                          0 0 10 -> uip_ds6_route_next
                          0 0 10 -> uip_ds6_route_rm
       0      0     16  rpl_remove_routes_by_nexthop
                          0 0 16 -> memcmp
                          0 0 14 -> uip_ds6_route_head
                          0 0 14 -> uip_ds6_route_next
                          0 0 16 -> uip_ds6_route_nexthop
                          0 0 14 -> uip_ds6_route_rm


   Segment part sizes:

   Bytes  Function/Label
   -----  --------------
       4  ?<Initializer for __Constant_ffffffff>
       6  ??rpl_add_route?relay
       6  ??rpl_init?relay
       6  ??rpl_ipv6_neighbor_callback?relay
       6  ??rpl_link_neighbor_callback?relay
       6  ??rpl_purge_routes?relay
       6  ??rpl_remove_routes?relay
       6  ??rpl_remove_routes_by_nexthop?relay
       4  __Constant_ffffffff
     185  rpl_add_route
     147  rpl_init
     118  rpl_ipv6_neighbor_callback
     323  rpl_link_neighbor_callback
     310  rpl_purge_routes
      81  rpl_remove_routes
     155  rpl_remove_routes_by_nexthop

 
 1 319 bytes in segment BANKED_CODE
    42 bytes in segment BANK_RELAYS
     4 bytes in segment XDATA_I
     4 bytes in segment XDATA_ID
 
 1 361 bytes of CODE  memory (+ 4 bytes shared)
     0 bytes of XDATA memory (+ 4 bytes shared)

Errors: none
Warnings: none
